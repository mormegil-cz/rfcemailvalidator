RFC 822 E-mail Address Validator
================================

Java implementation of e-mail address validation according strictly to RFC 822.

Motivation
----------
Proper validation of e-mail address format is a surprisingly complicated task: For this seemingly simple format, there are, in fact, many formats in existence, there are many specifications for those formats and there are many validators differing in what format exactly are they expecting and validating.

I needed a validator which would strictly validate exactly the format defined in the original [RFC 822](https://tools.ietf.org/html/rfc822) (specifically, its `addr-spec` production). So this library does exactly that. It is implemented _directly_ according to the syntax specification in the RFC so anyone can check if it is correct without need to read super-complicated regexes.

_Beware!_ This is usually _not_ the best format and validator to use for e.g. user-facing e-mail address inputs, etc. The RFC 822 format allows many things considered unacceptable for general use, e.g. domain literals (`joe@[192.168.0.2]`), strange and escaped characters (`very.unusual."@".unusual.com@example.com`), etc. You might want to consider one of the other existing validators listed below; check the table for the best match between your opinion on what constitutes an “acceptable e-mail address” and the validator’s.

Existing validators
-------------------
There are many e-mail address validators for Java already. However, they differ in the exact format they expect and validate. Prior to creating this library, I compared some of them to learn whether any of them implemented the exact validation I needed. Unfortunately, it seemed not.

The table shown below was generated using a program in this repository (with a few of the final extreme examples randomly generated by another program in this repo). It compares the following validators:

* _Java_: The validator built into the standard [`javax.mail.internet.InternetAddress`](https://javaee.github.io/javaee-spec/javadocs/javax/mail/internet/InternetAddress.html) class.
* _HTML5_: The regular expression for validating e-mail input fields in HTML5 (see [the HTML5 specification](https://html.spec.whatwg.org/multipage/input.html#email-state-(type=email))).
* _5322_: A random regex I found [on StackOverflow](https://stackoverflow.com/a/53382093/304138), claiming to validate according to RFC 5322.
* _CoVa_: [Apache Commons](https://commons.apache.org/proper/commons-validator/) implementation in [`org.apache.commons.validator.routines.EmailValidator`](https://commons.apache.org/proper/commons-validator/apidocs/org/apache/commons/validator/routines/EmailValidator.html).
* _EV4j_: Validator from [egulias/EmailValidator4J](https://github.com/egulias/EmailValidator4J).
** _EV4j!_: The same validator configured as more strict (with `WarningsNotAllowed`).
* _2822_: Validator from [bbottema/email-rfc2822-validator](https://github.com/bbottema/email-rfc2822-validator).
** _2822+_: The same validator configured as more lax (with `EmailAddressCriteria.RFC_COMPLIANT`).
* _852V_: This validator.

| String | Java | HTML5 | 5322 | CoVa | EV4j | EV4j! | 2822 | 2822+ | 852V |
|----|----|----|----|----|----|----|----|----|----|
| ``jan.novacek@seznam.cz`` | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ |
| ``jsmith@[192.168.2.1]`` | ✅ | ❌ | ✅ | ✅ | ✅ | ❌ | ❌ | ✅ | ✅ |
| ``niceandsimple@example.com`` | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ |
| ``a.little.unusual@example.com`` | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ |
| ``a.little.more.unusual@dept.example.com`` | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ |
| ``much."more\ unusual"@example.com`` | ❌ | ❌ | ❌ | ✅ | ✅ | ❌ | ❌ | ❌ | ✅ |
| ``very.unusual."@".unusual.com@example.com`` | ❌ | ❌ | ❌ | ✅ | ❌ | ❌ | ❌ | ❌ | ✅ |
| ``very."(),:;<>[]".VERY."very@\\\ \"very".unusual@strange.example.com`` | ❌ | ❌ | ❌ | ✅ | ❌ | ❌ | ❌ | ❌ | ✅ |
| ``"Abc@def"@example.com`` | ✅ | ❌ | ✅ | ✅ | ✅ | ❌ | ✅ | ✅ | ✅ |
| ``"Fred Bloggs"@example.com`` | ✅ | ❌ | ✅ | ✅ | ✅ | ❌ | ✅ | ✅ | ✅ |
| ``"Joe\\Blow"@example.com`` | ✅ | ❌ | ✅ | ✅ | ✅ | ❌ | ✅ | ✅ | ✅ |
| ``"Abc@def"@example.com`` | ✅ | ❌ | ✅ | ✅ | ✅ | ❌ | ✅ | ✅ | ✅ |
| ``customer/department=shipping@example.com`` | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ |
| ``$A12345@example.com`` | ✅ | ✅ | ❌ | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ |
| ``!def!xyz%abc@example.com`` | ✅ | ✅ | ❌ | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ |
| ``_somename@example.com`` | ✅ | ✅ | ❌ | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ |
| ``Abc.example.com`` | ❌ | ❌ | ❌ | ❌ | ❌ | ❌ | ❌ | ❌ | ❌ |
| ``Abc.@example.com`` | ❌ | ✅ | ❌ | ❌ | ❌ | ❌ | ❌ | ❌ | ❌ |
| ``Abc..123@example.com`` | ❌ | ✅ | ❌ | ❌ | ❌ | ❌ | ❌ | ❌ | ❌ |
| ``A<at:var at:name="b" />c@example.com`` | ❌ | ❌ | ❌ | ❌ | ❌ | ❌ | ❌ | ❌ | ❌ |
| ``a"b(c)d,e:f;g<h>i[j\k]l@example.com`` | ❌ | ❌ | ❌ | ❌ | ❌ | ❌ | ❌ | ❌ | ❌ |
| ``just"not"right@example.com`` | ❌ | ❌ | ❌ | ❌ | ❌ | ❌ | ❌ | ❌ | ❌ |
| ``this is"not\allowed@example.com`` | ❌ | ❌ | ❌ | ❌ | ❌ | ❌ | ❌ | ❌ | ❌ |
| ``this\ still\"not\\allowed@example.com`` | ❌ | ❌ | ❌ | ✅ | ❌ | ❌ | ❌ | ❌ | ❌ |
| ``zKcknV\|NGv.lI66vR#@X`QcRK4K.R`?NpA.Gc2Kqzue9.%&nb1kGWp/./#Och$RQv`` | ❌ | ❌ | ❌ | ❌ | ❌ | ❌ | ❌ | ✅ | ✅ |
| ``CwblJW{.+^Y}yw@A-+$`.-007%hT.//$40s.[s~o>Otn>tT0mSK\KdZN3].o1i\|V`` | ❌ | ❌ | ❌ | ❌ | ❌ | ❌ | ❌ | ❌ | ✅ |
| ``\|Y^@[W"t\ih1qHw=~Ja].3`` | ❌ | ❌ | ❌ | ❌ | ❌ | ❌ | ❌ | ❌ | ✅ |

Java library usage
------------------
```java
boolean isEmailValid(String str) {
    final Rfc822EmailAddressValidator parser = new Rfc822EmailAddressValidator(str);
    try {
        parser.validate();
        return true;
    } catch (ParseException e) {
        return false;
    }
}
```

Author & license
----------------
The implementation of the library is Copyright © 2021 Petr Kadlec. It is available under the MIT license.
